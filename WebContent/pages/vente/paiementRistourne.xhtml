<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//FR" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  V 0.1 : Maj : 09/11/2007 -->

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:a="https://ajax4jsf.dev.java.net/ajax"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:c="http://java.sun.com/jstl/core"
	template="/template/template.xhtml">
	<!-- Page d'accueil -->





	<ui:define name="title">#{msgBundle['gestock.paiementRistourne']}</ui:define>
	<ui:define name="body">
		<h:form id="note">

			
	<div class="zoneResultat2">
		
			<table> <tr> 
			      <td> <s:graphicImage fileName="candidat_64.png" style="border:0px;" value="/picto/candidat_64.png" width="4" height="4" alt="Peupler" /> </td> 
			        <td> <h1>#{msgBundle['gestock.paiementRistourne']}  </h1>  </td> 
			      </tr>    
			</table>
			
			<rich:panel header="#{msgBundle['gestock.paiementRistourne']}">
			
			
			
			<fieldset>
			<legend></legend>
			
			<table width="100%">
			
			
			</table>
		
			
		
		<div style="height: 12px;" />
		<table width="100%" >
				<tr>
					<td width="1175px;"  align="right" >
						<div id="trd_submenu" class="trd_kb">
							<ul>
								<li>
									<a:commandLink  action="#{venteService.paiementRistourne}" status="waitStatus" reRender="note,listeVRistourne"  value="">
										<s:graphicImage fileName="accept.png" style="border:0px;" value="/picto/accept.png" width="16" height="16" alt="" />
										#{msgBundle['btn.paiementRistourne']}
									</a:commandLink>
								</li>
								
							
							</ul>
						</div>
					</td>
					<td>
						&#160;
					</td>
				</tr>
			</table>
		
			</fieldset>		
				
			<rich:spacer height="20px;"></rich:spacer>
		
	<a:outputPanel id="listeVRistourne">
		<fieldset>
		   <legend> Resultat </legend>
		   <table width="100%">
			<tr> 
			    <td> <h:outputLabel value=" #{msgBundle['gestock.dateDebut']} : "  styleClass="grey"/> 
			    <h:inputText value="#{venteService.dateDebut}" disabled="true" /> </td>
			    <td> <h:outputLabel   styleClass="grey" value=" #{msgBundle['gestock.dateFin']} :  " /> 
			     <h:inputText value="#{venteService.dateFin}" disabled="true" />  </td>
			    <td> <h:outputLabel  styleClass="grey" value=" #{msgBundle['gestock.nbrRistournePositionne']} : #{venteService.nombreRistournePositionne}" />   </td>
			</tr>
			
			</table>
		   
			  <div  style="height:300px;overflow: auto">
				<rich:dataTable value="#{venteService.listeVenteRistourne}" var="it" rendered="#{not (empty venteService.listeVenteRistourne )}"
							id="listLiv" style="width:100%;" rowClasses="row1,row2">
							<f:facet name="header">
								<rich:columnGroup>
									<rich:column>
										<h:outputLabel value="Réf " style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value="Numéro Fac " style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value="Date Validation " style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value=" Date Saisi  " style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value=" #{msgBundle['gestock.client']}  " style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value="   #{msgBundle['gestock.distributeur']} " style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value="#{msgBundle['gestock.montant.total']}" style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value="#{msgBundle['gestock.montantRegle']}" style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value="#{msgBundle['gestock.montantReste']}" style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									
									<rich:column>
										<h:outputLabel value=" #{msgBundle['gestock.ristourne']}" style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value=" #{msgBundle['gestock.caissier']}" style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value=" #{msgBundle['gestock.caisse']}" style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
									<rich:column>
										<h:outputLabel value=" Action" style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
							     <rich:column>
								     <h:outputText value="#{it.reference}" />
								 </rich:column>
								  <rich:column>
								     <h:outputText value="#{it.numFacture}" />
								 </rich:column>
								  <rich:column>
								     <h:outputText value="#{it.dateVente}" />
								 </rich:column>
								 <rich:column>
								     <h:outputText value="#{it.dateVente}" />
								 </rich:column>
								 <rich:column>
								     <h:outputText rendered="#{it.client!=null}" value="#{it.client.prenom} - #{it.client.nom}" />
								 </rich:column>
								 
								  <rich:column>
								     <h:outputText rendered="#{it.distributeur!=null}" value="#{it.distributeur.intitule}" />
								 </rich:column>
								
								 <rich:column>
								      <TABLE align="right" >  <tr >  <td align="right" >
								           <h:outputText value="#{it.montantAPaye}" >    <f:convertNumber pattern="#,###" /> </h:outputText> #{msgBundle['monnaie.unite']}
								     </td>  </tr> </TABLE>
								 </rich:column>
								  <rich:column>
								      <TABLE align="right" >  <tr >  <td align="right" >
								           <h:outputText value="#{it.montantRegle}" >    <f:convertNumber pattern="#,###" /> </h:outputText> #{msgBundle['monnaie.unite']}
								     </td>  </tr> </TABLE>
								 </rich:column>
								   <rich:column>
								      <TABLE align="right" >  <tr >  <td align="right"  >
								           <h:outputText value="#{it.montantRestant}" style="color :red" >    <f:convertNumber pattern="#,###" /> </h:outputText> <h:outputText style="color :red" value="#{msgBundle['monnaie.unite']}" /> 
								     </td>  </tr> </TABLE>
								 </rich:column>
								 
								 <rich:column>
								       <TABLE align="right" >  <tr >  <td align="right" >
								           <h:outputText value="#{it.ristourne}" >    <f:convertNumber pattern="#,###" /> </h:outputText> #{msgBundle['monnaie.unite']}
								        </td> </tr> </TABLE>
								 </rich:column>
								 <rich:column >  <TABLE align="left" >  <tr >  <td align="left" >
								        <h:outputText value="#{it.utilisateurSaisi}"  />
								        </td> </tr> </TABLE> 
								 </rich:column>
								  <rich:column >  <TABLE align="left" >  <tr >  <td align="left" >
								        <h:outputText value="#{it.caisse.libelle}"  rendered="#{it.caisse !=null }" />
								        </td> </tr> </TABLE> 
								 </rich:column>
								  <rich:column>
								     
								 </rich:column>
				</rich:dataTable>
			</div>
			</fieldset>
			
		</a:outputPanel>
			</rich:panel>
			</div>
			</h:form>
		
			
	</ui:define>
</ui:composition>