<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//FR" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  V 0.1 : Maj : 09/11/2007 -->

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:a="https://ajax4jsf.dev.java.net/ajax"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:c="http://java.sun.com/jstl/core"
	template="/template/template.xhtml">
	<!-- Page d'accueil -->

	<ui:define name="title">RHOSPI</ui:define>
	<ui:define name="body">
		<rich:spacer height="20px;"></rich:spacer>
		<div class="divtest">
			<div class="container" style="margin-left: 5%;">

				<h:form id="liste">
					<div class="row">
						<div class="col-md-12">
							<div class="panel panel-success">
								<div class="panel-heading">
									<h3 class="panel-title" style="text-align: center;">LISTE
										#{changementService.libelleCh}</h3>
								</div>

								<div class="panel-body">
									<table cellpadding="5" cellspacing="5">
										<tr>
											<td><h:outputLabel styleClass="grey"
													value="En Attente de validation" /></td>
											<td><rich:spacer width="5px;"></rich:spacer></td>
											<td><a:commandLink value="" status="waitStatus"
													ajaxSingle="true"
													action="#{changementService.changementenCours}"
													reRender="liste" title="details">
													<s:graphicImage fileName="encours.png" style="border:0px;"
														value="/picto/encours.png" width="16" height="16" alt="" />

												</a:commandLink></td>
											<td><rich:spacer width="10px;"></rich:spacer></td>

											<td><h:outputLabel styleClass="grey" value="Valider" /></td>
											<td><rich:spacer width="5px;"></rich:spacer></td>
											<td><a:commandLink value="" status="waitStatus"
													action="#{changementService.changementValider}"
													reRender="liste" title="details">
													<s:graphicImage fileName="oui.png" style="border:0px;"
														value="/picto/oui.png" width="16" height="16" alt="" />

												</a:commandLink></td>

											<td><h:outputLabel styleClass="grey" value="Rejeter" /></td>
											<td><rich:spacer width="5px;"></rich:spacer></td>
											<td><a:commandLink value="" status="waitStatus"
													action="#{changementService.changementRejeter}"
													reRender="liste" title="details">
													<s:graphicImage fileName="non.png" style="border:0px;"
														value="/picto/non.png" width="16" height="16" alt="" />

												</a:commandLink></td>



										</tr>
									</table>




									<div class="form-group has-success"></div>
									<rich:dataTable value="#{changementService.listeChStatut}"
										var="pers" id="lstdemande" style="width:100%;" rows="10"
										rowClasses="row1,row2">
										<f:facet name="header">
											<rich:columnGroup>

												<rich:column>
													<h:outputLabel value="Etat:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>


												<rich:column>
													<h:outputLabel value="Personnel:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Ancien Statut:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>
												<rich:column>
													<h:outputLabel value="Nouveau Statut:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Changer Par:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Traité Par:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Date Changement"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Date Traitement"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Observation"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>
												
													<rich:column>
													<h:outputLabel value="Motif Rejet"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>


												<rich:column>
													<h:outputLabel value="Action"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>


											</rich:columnGroup>
										</f:facet>

										<rich:column>
											<s:graphicImage fileName="encours.png" style="border:0px;"
												value="/picto/encours.png" width="16" height="16" alt=""
												rendered="#{pers.statutValid.libelle_court eq 'A'}" />

											<s:graphicImage fileName="oui.png" style="border:0px;"
												value="/picto/oui.png" width="16" height="16" alt=""
												rendered="#{pers.statutValid.libelle_court eq 'V'}" />
											<s:graphicImage fileName="non.png" style="border:0px;"
												value="/picto/non.png" width="16" height="16" alt=""
												rendered="#{pers.statutValid.libelle_court eq 'R'}" />
										</rich:column>
										<rich:column filterBy="#{pers.personnel.nom}"
											filterEvent="onkeyup">
											<a:commandLink value="" status="waitStatus"
												action="#{changementService.zoomPersonnel(pers.personnel)}"
												oncomplete="javascript:Richfaces.showModalPanel('zoom',{width:1300, height:500})"
												reRender="formz" title="Details Personnel">
												<h:outputText
													value="#{pers.personnel.nom} #{pers.personnel.prenom}"
													styleClass="grey" />
											</a:commandLink>
										</rich:column>
										<rich:column filterBy="#{pers.oldStatut.libelle}"
											filterEvent="onkeyup">
											<h:outputText value="#{pers.oldStatut.libelle}"
												styleClass="grey" />
										</rich:column>
										<rich:column filterBy="#{pers.newStatut.libelle}"
											filterEvent="onkeyup">
											<h:outputText value="#{pers.newStatut.libelle}"
												styleClass="grey" />
										</rich:column>

										<rich:column>
											<h:outputText
												value="#{pers.userChang.nom} #{pers.userChang.prenom}"
												styleClass="grey" />
										</rich:column>


										<rich:column>
											<h:outputText
												value="#{pers.userVal.nom} #{pers.userVal.prenom}"
												styleClass="grey" />
										</rich:column>

										<rich:column>
											<h:outputText value="#{pers.dateChangement}"
												styleClass="grey">
												<f:convertDateTime pattern="dd.MM.yyyy" />
											</h:outputText>
										</rich:column>

										<rich:column>
											<h:outputText value="#{pers.dateAction}" styleClass="grey">
												<f:convertDateTime pattern="dd.MM.yyyy" />
											</h:outputText>
										</rich:column>


										<rich:column>
											<h:outputText value="#{pers.observation}" styleClass="grey">
											</h:outputText>
										</rich:column>
										
										<rich:column>
											<h:outputText value="#{pers.motif_rejet}" styleClass="grey">
											</h:outputText>
										</rich:column>


										<rich:column width="60px;">

											<a:commandLink value="" status="waitStatus"
												action="#{changementService.validerchangement(pers)}"
												reRender="liste" title="Valider"
												rendered="#{changementService.code eq 'st'}">
												<s:graphicImage fileName="pastille_verte.png"
													style="border:0px;" value="/img2/pastille_verte.png"
													width="16" height="16" alt="" />

											</a:commandLink>

											<rich:spacer width="10px;"></rich:spacer>
											<a:commandLink value="" status="waitStatus" reRender="liste,form"
												title="Rejeter" 
												action="#{changementService.versRejetchangement(pers)}"
												oncomplete="javascript:Richfaces.showModalPanel('rejet',{width:400, height:300})"
												rendered="#{changementService.code eq 'st'}">
												<s:graphicImage fileName="pastille_rouge.png"
													style="border:0px;" value="/img2/pastille_rouge.png"
													width="16" height="16" alt="" />

											</a:commandLink>



										</rich:column>

									</rich:dataTable>
									<rich:datascroller status="waitStatus" stepControls="auto"
										style="width:100%" for="lstdemande"
										rendered="#{not empty changementService.listeChStatut}" />







								</div>

							</div>
						</div>
					</div>
				</h:form>
			</div>



		</div>



		<rich:modalPanel id="rejet"
			style="background:url('../img2/fond.jpg') repeat-x scroll 0 0 #FFF;height:300; width:900"
			moveable="true" styleClass="popupAttente">
			<f:facet name="controls">

				<a:commandLink value="" status="waitStatus" title="Fermer "
					onclick="javascript:Richfaces.hideModalPanel('rejet')">
					<s:graphicImage fileName="cross.png" style="border:0px;"
						value="/picto/cross.png" width="16" height="16" alt="" />
				</a:commandLink>
			</f:facet>
			<f:facet name="header">
			REJET #{changementService.libelleCh.toUpperCase()} 
			</f:facet>
			<rich:spacer height="10px" />
			<h:form class="note-form" id="form">



				<div class="row">
					<div class="col-md-12">
						<div class="panel panel-success">
							<div class="panel-heading">
								<h3 class="panel-title" style="text-align: center;">REJET
									#{changementService.libelleCh.toUpperCase()}</h3>
							</div>

							<div class="panel-body">
								<div class="form-group has-success">
									<TABLE class="table">
										<tr>
											
											<td><h:outputLabel styleClass="grey" value="Motif Rejet" /></td>
											


											<td><h:inputTextarea
													value="#{changementService.motif_rejet}" cols="30"
													rows="3" class="form-control" /></td>
										</tr>



									</TABLE>
									
									<p align="center">

										<a:commandLink styleClass="btn btn-success" value=""
											oncomplete="javascript:Richfaces.hideModalPanel('sim',{width:1300, height:500})"
											action="#{changementService.rejeterChangement()}"
											reRender="form,liste" status="waitStatus">
																		
																		VALIDER			
																				</a:commandLink>
										<rich:spacer width="10px;"></rich:spacer>

										<a:commandLink styleClass="btn btn-danger" value=""
											oncomplete="javascript:Richfaces.hideModalPanel('sim',{width:1300, height:500})"
											action="#{changementService.annulerRejet()}"
											reRender="form,liste" status="waitStatus">
																		
																		ANNULER			
																				</a:commandLink>
									</p>


								</div>

							</div>

						</div>
					</div>
				</div>


			</h:form>
		</rich:modalPanel>



		<rich:modalPanel id="zoom"
			style="background:url('../img2/fond.jpg') repeat-x scroll 0 0 #FFF;height:300; width:900"
			moveable="true" styleClass="popupAttente">
			<f:facet name="controls">

				<a:commandLink value="" status="waitStatus" title="Fermer "
					onclick="javascript:Richfaces.hideModalPanel('zoom')">
					<s:graphicImage fileName="cross.png" style="border:0px;"
						value="/picto/cross.png" width="16" height="16" alt="" />
				</a:commandLink>
			</f:facet>
			<f:facet name="header">
			 ZOOM SUR LE PERSONNEL #{changementService.personnel.nom.toUpperCase()} #{changementService.personnel.prenom.toUpperCase()}
			</f:facet>
			<rich:spacer height="10px" />
			<h:form class="note-form" id="formz">

				<div class="row">
					<div class="col-md-12">
						<div class="panel panel-success">
							<div class="panel-heading">
								<h3 class="panel-title" style="text-align: center;">ZOOM
									PERSONNEL</h3>
							</div>

							<div class="panel-body">
								<div class="form-group has-success">
									<TABLE class="table">
										<tr>
											<td><h:outputLabel styleClass="grey" value="Nom" /></td>
											<td><h:inputText
													value="#{changementService.personnel.nom}" required="true"
													class="form-control" disabled="true" /></td>


											<td><h:outputLabel styleClass="grey" value="Prénom" /></td>
											<td><h:inputText
													value="#{changementService.personnel.prenom}"
													required="true" class="form-control" disabled="true" /></td>
										</tr>

										<tr>
											<td><h:outputLabel value="Lieu de Naissance"
													styleClass="grey" /></td>
											<td><h:inputText
													value="#{changementService.personnel.lieuNaissance}"
													required="false" class="form-control" disabled="true" /></td>


											<td><h:outputLabel styleClass="grey"
													value="Date de Naissance" /></td>
											<td><rich:calendar enableManualInput="true"
													validatorMessage="X" maxlength="10"
													value="#{changementService.personnel.dateNaissance}"
													locale="fr" popup="#{true}" style="width:100px"
													datePattern="dd/MM/yyyy" required="false"
													requiredMessage="" cellWidth="1px" disabled="true" /></td>
										</tr>

										<tr>
											<td><h:outputLabel styleClass="grey"
													value="Catégorie Prof" /></td>
											<td><h:selectOneMenu class="form-control"
													value="#{changementService.personnel.categoriProg}"
													converter="#{categoriProfConverter}"
													noSelectionLabel="--- Selectionnez ---" disabled="true">

													<s:selectItems
														value="#{listeParamStock.listeLst_CategoriProf}" var="cat"
														label="#{cat.libelle}" />


												</h:selectOneMenu></td>


											<td><h:outputLabel styleClass="grey" value="Contrat" /></td>
											<td><h:selectOneMenu class="form-control"
													value="#{changementService.personnel.contrant}"
													converter="#{typeContratConverter}" id="cont"
													noSelectionLabel="--- Selectionnez ---" disabled="true">

													<s:selectItems
														value="#{listeParamStock.listeLst_TypeContrat}" var="type"
														label="#{type.libelle}" />


												</h:selectOneMenu></td>
										</tr>



										<tr>
											<td><h:outputLabel styleClass="grey" value="Statut" /></td>
											<td><h:selectOneMenu class="form-control"
													value="#{changementService.personnel.statut}"
													converter="#{statutConverter}"
													noSelectionLabel="--- Selectionnez ---" disabled="true">

													<s:selectItems value="#{listeParamStock.listeLst_Statut}"
														var="cat" label="#{cat.libelle}" />


												</h:selectOneMenu></td>


											<td><h:outputLabel styleClass="grey" value="Sexe" /></td>
											<td><h:selectOneMenu class="form-control"
													value="#{changementService.personnel.sexe}"
													converter="#{sexeConverter}" id="sx"
													noSelectionLabel="--- Selectionnez ---" disabled="true">

													<s:selectItems value="#{listeParamStock.listeLst_Sexe}"
														var="sexe" label="#{sexe.libelle}" />


												</h:selectOneMenu></td>
										</tr>

										<tr>
											<td><h:outputLabel styleClass="grey"
													value="Situation Matrimoniale" /></td>
											<td><h:selectOneMenu class="form-control"
													value="#{changementService.personnel.situationMatri}"
													converter="#{situationMatriConverter}"
													noSelectionLabel="--- Selectionnez ---" disabled="true">

													<s:selectItems
														value="#{changementService.listeParamStock.listeLst_SituationMatri}"
														var="sit" label="#{sit.libelle}" />


												</h:selectOneMenu></td>


											<td><h:outputLabel styleClass="grey" value="Service" /></td>
											<td><h:selectOneMenu class="form-control"
													value="#{changementService.personnel.service}"
													converter="#{serviceConverter}"
													noSelectionLabel="--- Selectionnez ---" disabled="true">

													<s:selectItems
														value="#{changementService.listeParamStock.listeLst_Service}"
														var="service" label="#{service.libelle}" />


												</h:selectOneMenu></td>
										</tr>


										<tr>
											<td><h:outputLabel styleClass="grey"
													value="Niveau d'Etude" /></td>
											<td><h:selectOneMenu class="form-control"
													value="#{changementService.personnel.nivEtude}"
													converter="#{nivEtudeConverter}"
													noSelectionLabel="--- Selectionnez ---" disabled="true">

													<s:selectItems
														value="#{changementService.listeParamStock.listeLst_NivEtude}"
														var="sit" label="#{sit.libelle}" />


												</h:selectOneMenu></td>



										</tr>



									</TABLE>


								</div>

							</div>

						</div>
					</div>
				</div>


			</h:form>
		</rich:modalPanel>





	</ui:define>
</ui:composition>