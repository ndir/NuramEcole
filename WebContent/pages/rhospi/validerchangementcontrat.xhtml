<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//FR" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  V 0.1 : Maj : 09/11/2007 -->

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:a="https://ajax4jsf.dev.java.net/ajax"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:c="http://java.sun.com/jstl/core"
	template="/template/template.xhtml">
	<!-- Page d'accueil -->

	<ui:define name="title">RHOSPI</ui:define>
	<ui:define name="body">
		<rich:spacer height="20px;"></rich:spacer>
		<div class="divtest">
			<div class="container" style="margin-left: 5%;">

				<h:form id="liste">
					<div class="row">
						<div class="col-md-12">
							<div class="panel panel-success">
								<div class="panel-heading">
									<h3 class="panel-title" style="text-align: center;">LISTE
										CHANGEMENT CONTRAT A VALIDER</h3>
								</div>
								<div class="panel-body">
									<div class="form-group has-success"></div>
									<rich:dataTable value="#{changementService.listeContrat}"
										var="pers" id="con" style="width:100%;" rows="10"
										rowClasses="row1,row2">
										<f:facet name="header">
											<rich:columnGroup>

												<rich:column>
													<h:outputLabel value="Personnel:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Contrat:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>
												<rich:column>
													<h:outputLabel value="Date début"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Date fin"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Crée par:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

												<rich:column>
													<h:outputLabel value="Action:"
														style="color:white;font-size:12px;font-family: Arial;text-align:center;" />
												</rich:column>

											</rich:columnGroup>
										</f:facet>

										<rich:column>
											<h:outputText
												value="#{pers.personnel.nom} #{pers.personnel.prenom}"
												styleClass="grey" />
										</rich:column>
										<rich:column>
											<h:outputText value="#{pers.contrat.libelle}"
												styleClass="grey" />
										</rich:column>
										<rich:column>
											<h:outputText value="#{pers.datedebut}" styleClass="grey">
											</h:outputText>
										</rich:column>

										<rich:column>
											<h:outputText value="#{pers.datefin1}" styleClass="grey">
											</h:outputText>
										</rich:column>


										<rich:column>
											<h:outputText value="#{pers.user.nom} #{pers.user.prenom}"
												styleClass="grey" />
										</rich:column>

										<rich:column>
											<a:commandLink value="" status="waitStatus"
												action="#{changementService.validerContrat(pers)}"
												onclick="if (!confirm(' Voulez-vous vraiment valider ce contrat ?')) return false"
												reRender="liste" title="Valider">
												<s:graphicImage fileName="accept.png" style="border:0px;"
													value="/picto/accept.png" width="16" height="16" alt="" />

											</a:commandLink>
											<rich:spacer width="10px;"></rich:spacer>
											<a:commandLink value="" status="waitStatus"
												action="#{changementService.rejeterContrat(pers)}"
												onclick="if (!confirm(' Voulez-vous vraiment rejeter ce contrat ?')) return false"
												reRender="liste" title="Rejeter">
												<s:graphicImage fileName="close-button.png" style="border:0px;"
													value="/img/close-button.png" width="16" height="16" alt="" />

											</a:commandLink>

										</rich:column>

									</rich:dataTable>
									<rich:datascroller status="waitStatus" stepControls="auto"
										style="width:100%" for="con"
										rendered="#{not empty changementService.listeContrat}" />

								</div>

							</div>
						</div>
					</div>
				</h:form>
			</div>



		</div>
	</ui:define>
</ui:composition>